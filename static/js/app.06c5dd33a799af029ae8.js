webpackJsonp([2],{121:function(e,t,n){"use strict";function a(e,t){e=e||[];var n=[];return e.forEach(function(e){e.language&&n.push({language:e.language,label:e.label||t})}),i.languages.forEach(function(e){n.find(function(t){return t.language===e.id})||n.push({language:e.id,label:t})}),n}t.a=a;var i=n(22);n.n(i)},123:function(e,t,n){"use strict";var a=n(172),i=n.n(a),r=n(70),s=n.n(r),o=n(124),c=n.n(o),l=n(175),u=n.n(l),d=n(174),f=n.n(d),p=n(169),h=function(e){function t(e,n){s()(this,t);var a=u()(this,(t.__proto__||i()(t)).call(this,e));a.originalId=e.id,a.active=!!e.active;var r=function(e,t){return e.find(function(e){return e.originalId===t})},o=e.layers&&e.layers.map(function(e){return r(n,e)}).filter(function(e){return!!e});return a.layers=o||[],a.inlineLegendUrl=e.inlineLegendUrl||null,a.opacity=e.opacity||1,a}return f()(t,e),c()(t,[{key:"legend",value:function(e){return this.layers.map(function(t){var n=null;if(t.legend)if("wms"===t.legend.type){var a=t.legend.style.replace("$(_lang)",e);n=t.serverUrls[0]+"?LEGEND_OPTIONS=fontColor:ffffff;fontAntiAliasing:true\n&LAYER="+t.name+"&STYLE="+a+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=18&HEIGHT=18&TRANSPARENT=true"}else n=t.legend.url;else if(t.styles){var i=t.styles.find(function(t){return t.language===e}),r=i?i.label:null;n=t.serverUrls[0]+"?LEGEND_OPTIONS=fontColor:ffffff;fontAntiAliasing:true\n&LAYER="+t.name+"&STYLE="+r+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=18&HEIGHT=18&TRANSPARENT=true"}return n}).filter(function(e){return e})}},{key:"hasLegends",get:function(){return this.layers.some(function(e){return e.legend||e.styles&&e.styles.some(function(e){return e.label})})}}]),t}(p.a);t.a=h},16:function(e,t,n){function a(e){n(379)}var i=n(12)(n(291),n(497),a,null,null);e.exports=i.exports},165:function(e,t,n){function a(e){n(387)}var i=n(12)(n(306),n(506),a,"data-v-ce93a634",null);e.exports=i.exports},166:function(e,t,n){"use strict";function a(){return new h.a(function(e,t){var a=x.layersConfigApi.baseUrl+x.layersConfigApi.getLayersConfigUrl;n.i(g.a)("GET",a).then(function(t){return e(new L(JSON.parse(t)))}).catch(function(e){return t(e.statusText||e.message)})})}function i(e,t){var n=e.recReduce(function(e,t){return e.concat(t)},[]),a=e.recReduce(function(e,t){return[].concat.apply(e,t.layers)},[]);a=t.map(function(e){return a.find(function(t){return t.id===e})}).filter(function(e){return e});var i=function(e,t){switch(e){case"originalId":case"urls":case"opacity":return;case"serverUrls":return t||void 0;case"legend":case"sourceLink":case"sourceLabel":return t||void 0;case"times":var n=t.map(function(e){return e.iso8601});return n&&n.length?n:void 0;case"styles":var a=t.map(function(e){return e.label?e:null}).filter(function(e){return!!e});return a.length?a:void 0;default:return t}},r=JSON.parse(f()(a,i)),s=function(e,t){switch(e){case"layers":return t.length?t.map(function(e){return e.id}):void 0;case"inlineLegendUrl":case"infoFile":return t||void 0;case"parent":case"hasLegends":case"times":case"originalId":return;default:return t}},o=JSON.parse(f()(n,s)),c=function(e,t){switch(e){case"":return{exclusive:t.exclusive,items:t.items};case"id":case"parent":return;case"infoFile":return t||void 0;case"items":if(0===t.length)return;return t.map(function(e){return e.isGroup?{group:e}:{context:e.id}});default:return t}},l=JSON.parse(f()(e,c)),u={$schema:"../../layersJsonSchema_v2.json",layers:r,contexts:o,group:l};return f()(u)}function r(e,t){var a=x.layersConfigApi.baseUrl+x.layersConfigApi.saveLayersConfigUrl;return n.i(g.a)("POST",a,i(e,t),[["Content-Type","application/json"],["Authorization",y.a.getAuthToken()]])}function s(){return new h.a(function(e,t){var a=x.layersConfigApi.baseUrl+x.layersConfigApi.getLayersConfigHistoryUrl;n.i(g.a)("GET",a,null,[["Authorization",y.a.getAuthToken()]]).then(function(t){return e(JSON.parse(t))}).catch(function(e){return t(e)})})}function o(e){var t=x.layersConfigApi.baseUrl+x.layersConfigApi.restoreVersionUrl+"?version="+e;return n.i(g.a)("GET",t,null,[["Authorization",y.a.getAuthToken()]])}function c(e,t,n){var a=[1128,2256,4513,9027,18055,36111,72223,144447,288895,577790,1155581,2311162,4622324,9244649,18489298,36978596,73957193,147914387,295828775,591657550],i=Math.round(39.37*90*E.a.getView().getResolution()),r=a.find(function(e){return e>=i})||a.slice(-1)[0];C.a.pages[0].center=E.a.getView().getCenter(),C.a.pages[0].scale=r;var s=e.filter(function(e){return!!e.visible});if(s.length){var o=s.reduce(function(e,t){switch(t.type){case"osm":case"bing-aerial":case"esri":return e.push([t]),e;case"wms":e.length||e.push([]);var n=e[e.length-1];return!n.length||"wms"===n[0].type&&n[0].serverUrls[0]!==t.serverUrls[0]?(n.unshift(t),e):(e.push([t]),e)}},[]);o=[].concat.apply([],o);var c={maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],tileSize:[256,256],resolutions:[156543.0339,78271.51695,39135.758475,19567.8792375,9783.93961875,4891.969809375,2445.9849046875,1222.99245234375,611.496226171875,305.7481130859375,152.87405654296876,76.43702827148438,38.21851413574219,19.109257067871095,9.554628533935547,4.777314266967774,2.388657133483887,1.1943285667419434,.5971642833709717],singleTile:!1};C.a.layers=o.map(function(e){if(!e.visible)return null;switch(e.type){case"wms":return{type:"wms",layers:[e.name],baseURL:e.serverUrls[0],format:e.imageFormat};case"osm":return u()({},c,{type:"OSM",baseURL:"http://a.tile.openstreetmap.org/",extension:"png"});case"esri":return u()({},c,{type:"XYZ",baseURL:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile",extension:"jpg",path_format:"/${z}/${y}/${x}"});default:return null}}).filter(function(e){return!!e});var l=[];return C.a.legends=t.forEach(function(e){var t=e.labels.find(function(e){return e.language===n}).label;if(e.inlineLegendUrl)l.push({classes:[{icons:[e.inlineLegendUrl],name:""}],name:t});else if(e.hasLegends){var a={classes:[],name:t};e.layers.forEach(function(e){if(e.legend)switch(e.legend.type){case"url":if(!e.legend.url.startsWith("http://"))return;a.classes.push({icons:[e.legend.url],name:""});break;case"wms":var t=void 0;if(e.legend)t=e.legend.style.replace("$(_lang)",n);else if(e.styles){var i=e.styles.find(function(e){return e.language===n});t=i?i.label:null}var r=e.serverUrls[0]+"?LEGEND_OPTIONS=fontColor:000000;fontAntiAliasing:true&LAYER="+e.name+"&STYLE="+t+"&REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=18&HEIGHT=18&TRANSPARENT=true";a.classes.push({icons:[r],name:""});break;default:return}}),l.push(a)}}),C.a.legends=l.filter(function(e){return!!e}),C.a}}t.d=a,t.b=r,t.a=s,t.e=o,t.c=c;var l=n(68),u=n.n(l),d=n(122),f=n.n(d),p=n(79),h=n.n(p),v=n(70),m=n.n(v),g=n(67),y=n(69),b=n(268),_=n(123),w=n(168),x=n(22),k=(n.n(x),n(509)),C=n.n(k),E=n(55),L=function e(t){var n=this;m()(this,e);var a=t.layers.map(function(e){return new b.a(e)}),i=t.contexts.map(function(e){return new _.a(e,a)});this.groups=new w.a(t.group,i,null),this.contexts=i.filter(function(e){return n.groups.findById(e.id)}),this.layers=a.filter(function(e){return n.contexts.some(function(t){return-1!==t.layers.indexOf(e)})}),this.contexts.forEach(function(e){e.layers.forEach(function(t){t.opacity=e.opacity})})}},167:function(e,t,n){"use strict";function a(e){return!!e&&Array===e.constructor}var i=n(80),r=n.n(i),s=n(79),o=n.n(s),c=n(170),l=n.n(c),u=n(67),d={state:{locale:null,fallback:null,translations:{}},mutations:{SET_LOCALE:function(e,t){var n=t.locale;e.locale=n},ADD_LOCALE:function(e,t){var n=t.locale,a=t.translations;e.translations[n]=f(a);try{e.translations.__ob__&&e.translations.__ob__.dep.notify()}catch(e){}},REMOVE_LOCALE:function(e,t){var n=t.locale;if(e.translations.hasOwnProperty(n)){e.locale===n&&(e.locale=null);var a=l()({},e.translations);delete a[n],e.translations=a}},SET_FALLBACK_LOCALE:function(e,t){var n=t.locale;e.fallback=n}},actions:{setLocale:function(e,t){e.commit({type:"SET_LOCALE",locale:t.locale})},addLocale:function(e,t){var n=t.locale,a=t.translations;e.commit({type:"ADD_LOCALE",locale:n,translations:a})},loadLocale:function(e,t){var a=e.dispatch,i=t.locale,r=t.url;return n.i(u.a)("GET",r).then(function(e){return a("addLocale",{locale:i,translations:JSON.parse(e)}),o.a.resolve()}).catch(function(e){return o.a.reject(e)})},removeLocale:function(e,t){var n=t.locale,a=t.translations;e.commit({type:"REMOVE_LOCALE",locale:n,translations:a})},setFallbackLocale:function(e,t){var n=t.locale;e.commit({type:"SET_FALLBACK_LOCALE",locale:n})}}},f=function e(t){var n={};for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];if(a(s))s.find(function(e){return"string"!=typeof e})&&console.warn("i18n:","currently only arrays of strings are supported",s),n[i]=s;else if("object"===(void 0===s?"undefined":r()(s))&&null!==s){var o=e(s);for(var c in o)o.hasOwnProperty(c)&&(n[i+"."+c]=o[c])}else n[i]=s}return n};t.a=d},168:function(e,t,n){"use strict";var a=n(172),i=n.n(a),r=n(70),s=n.n(r),o=n(175),c=n.n(o),l=n(174),u=n.n(l),d=n(169),f=n(123),p=function(e){function t(e,n,a){s()(this,t);var r=c()(this,(t.__proto__||i()(t)).call(this,e));return r.parent=a,r.exclusive=!!e.exclusive,e.exclusive&&(void 0===e.allowDisableAll?r.allowDisableAll=!0:r.allowDisableAll=!!e.allowDisableAll),r.items=(e.items||[]).map(function(e){if(void 0!==e.context){var a=n.find(function(t){return t.originalId===e.context})||new f.a({id:e.context,label:e.context});return a.parent=r,a}return e.group&&new t(e.group,n,r)}),r}return u()(t,e),t}(d.a);t.a=p},169:function(e,t,n){"use strict";var a=n(70),i=n.n(a),r=n(124),s=n.n(r),o=n(121),c=function(){function e(t){i()(this,e),this.id=e.nextId++,this.infoFile=t.infoFile||null,this.labels=n.i(o.a)(t.labels)}return s()(e,[{key:"recReduce",value:function(e,t){return this.items.reduce(function(t,n){return n.isGroup?n.recReduce(e,t):e(t,n)},t)}},{key:"findById",value:function(e){return this.id===e?this:this.isGroup&&this.items.reduce(function(t,n){return t||n.findById(e)},null)}},{key:"isGroup",get:function(){return!!this.items}}]),e}();c.nextId=0,t.a=c},22:function(e,t){e.exports=globalConf},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(176),i=n.n(a),r=n(472),s=n.n(r),o=n(277),c=n(47),l=n.n(c),u=n(471),d=n.n(u),f=n(69),p=n(275),h=n(22),v=(n.n(h),function(){var e={};return window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).forEach(function(t){var n=i()(t,2),a=n[0],r=n[1];e[a]?"string"==typeof e[a]?e[a]=[e[a],decodeURIComponent(r)]:e[a].push(decodeURIComponent(r)):e[a]=decodeURIComponent(r)}),e}());l.a.use(d.a,{dialog:!0,dynamic:!0,injectModalsContainer:!0}),l.a.use(p.a.plugin,o.a);var m=h.languages.map(function(e){return e.id}),g=m[0],y=navigator.language||navigator.userLanguage;-1!==m.indexOf(v.lang)?g=v.lang:y&&-1!==m.indexOf(y)&&(g=y),l.a.i18n.set(g);var b=new l.a({el:"#app",data:{loaded:!1},store:o.a,render:function(e){return e(s.a)}});l.a.i18n.load(g,"static/configuration/locale/"+g+".json").then(function(){b.loaded=!0}).catch(function(e){return alert("Error loading language file: "+e)}),f.a.checkAuth()},264:function(e,t){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),a=n.length>>>0,i=arguments[1],r=0;r<a;r++)if(t=n[r],e.call(i,t,r,n))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=arguments[1],i=0;i<n;){var r=t[i];if(e.call(a,r,i,t))return i;i++}return-1}})},268:function(e,t,n){"use strict";var a=n(70),i=n.n(a),r=n(121),s=n(22),o=(n.n(s),function e(t){if(i()(this,e),this.id=e.nextId++,this.originalId=t.id,this.type=t.type||"wms",this.opacity=1,"wms"===this.type){this.serverUrls=t.serverUrls||s.map.defaultGeoServerURLs,this.name=t.wmsName||t.name||null,this.styles=n.i(r.a)(t.styles),this.imageFormat=t.imageFormat||"image/png8",this.legend=t.legend||null;var a=t.times||[];this.times=a.map(function(e){return{iso8601:e,humanReadable:e}}),this.statistics=t.statistics&&t.statistics.map(function(e){var t={type:e.type,labels:e.labels};switch(e.type){case"url":t.url=e.url;break;case"attributes":t.attributes=e.attributes&&e.attributes.map(function(e){return{attribute:e.attribute,labels:e.labels||e.attribute}});break;default:throw new Error("Unsupported statistics type: "+e.type)}return t}),this.downloadLinks=t.downloadLinks}this.visible=!1!==t.visible,this.sourceLink=t.sourceLink||null,this.sourceLabel=t.sourceLabel||null});o.nextId=0,t.a=o},273:function(e,t,n){"use strict";function a(e){return!!e&&Array===e.constructor}var i=n(80),r=n.n(i),s=n(167),o=n(274),c={};c.install=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"i18n",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["{","}"];if(t.registerModule(n,s.a),!t.state.hasOwnProperty(n))return console.error("i18n vuex module is not correctly initialized. Please check the module name:",n),e.prototype.$i18n=function(e){return e},e.prototype.$getLanguage=function(){return null},void(e.prototype.$setLanguage=function(){return console.error("i18n vuex module is not correctly initialized")});var i=l(a),r=function(){var e=t.state[n].locale;return o.apply(void 0,[e].concat(Array.prototype.slice.call(arguments)))},o=function(e){var a="",r="",s={},o=null,c=arguments.length;c>=3&&"string"==typeof arguments[2]?(a=arguments[1],r=arguments[2],c>3&&(s=arguments[3]),c>4&&(o=arguments[4])):(a=arguments[1],r=a,c>2&&(s=arguments[2]),c>3&&(o=arguments[3]));var l=t.state[n].translations,u=t.state[n].fallback,d=e.split("-"),f=!0;return l.hasOwnProperty(e)?l[e].hasOwnProperty(a)||(f=!1):f=!1,f?i(e,l[e][a],s,o):d.length>1&&l.hasOwnProperty(d[0])&&l[d[0]].hasOwnProperty(a)?i(d[0],l[d[0]][a],s,o):l.hasOwnProperty(u)?l[u].hasOwnProperty(a)?i(e,l[u][a],s,o):i(u,r,s,o):i(e,r,s,o)},c=function(e){var a=t.state[n].locale,i=t.state[n].fallback,r=t.state[n].translations;return r.hasOwnProperty(a)?r[a].hasOwnProperty(e):!!r.hasOwnProperty(i)&&r[i].hasOwnProperty(e)},u=function(e){t.dispatch({type:"setFallbackLocale",locale:e})},d=function(e){t.dispatch({type:"setLocale",locale:e})},f=function(){return t.state[n].locale},p=function(e,n){return t.dispatch({type:"addLocale",locale:e,translations:n})},h=function(e,n){return t.dispatch({type:"loadLocale",locale:e,url:n})},v=function(e){t.state[n].translations.hasOwnProperty(e)&&t.dispatch({type:"removeLocale",locale:e})},m=function(e){return t.state[n].translations.hasOwnProperty(e)};e.prototype.$i18n={locale:f,set:d,add:p,load:h,remove:v,fallback:u,localeExists:m,keyExists:c},e.i18n={locale:f,set:d,add:p,load:h,remove:v,fallback:u,translate:r,translateIn:o,localeExists:m,keyExists:c},e.prototype.$t=r,e.prototype.$te=c,e.prototype.$tlang=o,e.filter("translate",r)};var l=function(e){null!=e&&2===e.length||console.warn("You must specify the start and end character identifying variable substitutions");var t=new RegExp(e[0]+"\\w+"+e[1],"g"),n=function(n,a){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n.replace?n.replace(t,function(t){var r=t.replace(e[0],"").replace(e[1],"");return void 0!==a[r]?a[r]:(i&&(console.group("Not all placeholders found"),console.warn("Text:",n),console.warn("Placeholder:",t),console.groupEnd()),t)}):n};return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=void 0===t?"undefined":r()(t),l=void 0===s?"undefined":r()(s),u=function(){return a(t)?t.map(function(e){return n(e,i,!1)}):"string"===c?n(t,i,!0):void 0};if(null===s)return u();if("number"!==l)return console.warn("pluralization is not a number"),u();var d=u().split(":::"),f=o.a.getTranslationIndex(e,s);return void 0===d[f]?(console.warn("no pluralized translation provided in ",t),d[0].trim()):d[f].trim()}};t.a=c},274:function(e,t,n){"use strict";t.a={getTranslationIndex:function(e,t){switch(e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!==t?1:0;case"mk":return 1===t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!==t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return 0===t?0:1===t?1:2;case"ro":return 1===t?0:0===t||t%100>0&&t%100<20?1:2;case"pl":return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1===t?0:t>=2&&t<=4?1:2;case"csb":return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"sl":return t%100==1?0:t%100==2?1:t%100==3||t%100==4?2:3;case"mt":return 1===t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return 1===t||11===t?0:2===t||12===t?1:t>2&&t<20?2:3;case"cy":return 1===t?0:2===t?1:8!==t&&11!==t?2:3;case"kw":return 1===t?0:2===t?1:3===t?2:3;case"ga":return 1===t?0:2===t?1:t>2&&t<7?2:t>6&&t<11?3:4;case"ar":return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return 1!==t?1:0}}}},275:function(e,t,n){"use strict";var a=n(167),i=n(273);t.a={store:a.a,plugin:i.a}},276:function(e,t,n){"use strict";var a=n(70),i=n.n(a),r=n(124),s=n.n(r),o=n(156),c=n(251),l=n(93),u=n(252),d=n(150),f=n(22),p=(n.n(f),[]),h=function(){function e(){i()(this,e)}return s()(e,null,[{key:"createOlLayer",value:function(e,t){var n=void 0;switch(e.type){case"osm":n=new o.b;break;case"bing-aerial":n=new c.a({key:f.map.bingMapsKey,imagerySet:"Aerial"});break;case"esri":n=new l.a({attributions:'Tiles © <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"});break;default:var a=[],i=e.sourceLabel,r=e.sourceLink,s=i||r;if(s){var h=p[s];h||(h=r?'<a target="_blank" href="'+r+'">'+s+"</a>":i),p[s]=h,a.push(h)}var v=e.styles&&e.styles.find(function(e){return e.language===t}).label;n=new u.a({urls:e.serverUrls,params:{LAYERS:e.name,STYLES:v||void 0,VERSION:"1.3.0",FORMAT:e.imageFormat,WIDTH:256,HEIGHT:256,CRS:"EPSG:3857",TILED:!0,tilesorigin:"-20037508.34,-20037508.34"},serverType:"geoserver",attributions:a})}if(n)return new d.a({visible:!1,source:n,opacity:e.opacity||1})}}]),e}();t.a=h},277:function(e,t,n){"use strict";var a=n(173),i=n.n(a),r=n(47),s=n.n(r),o=n(31),c=n(166),l=n(121),u=n(123),d=n(168),f=n(109);s.a.use(o.c);var p=function(e){var t=[];e.contexts.forEach(function(e){var n=e.layers.filter(function(e){return"wms"===e.type&&e.times.length}).reduce(function(e,t){return e.concat(t.times)},[]).filter(function(e,t,n){return n.findIndex(function(t){return t.iso8601===e.iso8601})===t}).sort(function(e,t){return Date.parse(e.iso8601)-Date.parse(t.iso8601)});e.times=n,n&&n.length&&(t[e.id]=e.times[e.times.length-1])}),e.contextsTimes=t},h={layers:[],contexts:[],groups:null,layerInfo:null,contextsTimes:[],kmlOverlay:null,enableFeedback:!1,measureActive:!1,activeContextsIds:[],editing:!1,editGroup:null,editContext:null,editLayers:!1},v={enable_edit:function(e,t){var n=t.editing;e.editing=n},add_group:function(e){var t=new d.a({labels:n.i(l.a)(null,"New group")},[],e.groups);e.groups.items.push(t)},add_context:function(e){var t=new u.a({labels:n.i(l.a)(null,"New context")});t.parent=e.groups,t.times=[],e.groups.items.push(t),e.contexts.push(t)},edit_item:function(e,t){var n=t.id,a=e.groups.findById(n);a?a.isGroup?e.editGroup=a:e.editContext=a:e.editContext=e.editGroup=null},delete_item:function(e,t){var n=t.id,a=e.groups.findById(n),i=a.parent.items.findIndex(function(e){return e.id===n});i>-1&&a.parent.items.splice(i,1)},edit_layers:function(e,t){var n=t.edit;e.editLayers=n},save_group:function(e,t){var n=t.id,a=t.labels,i=t.exclusive,r=t.allowDisableAll,s=t.infoFile,o=e.groups.findById(n);o.labels=a,o.exclusive=i,o.allowDisableAll=r,o.infoFile=s},save_context:function(e,t){var n=t.id,a=t.label,i=t.labels,r=t.infoFile,s=t.active,o=t.inlineLegendUrl,c=t.layerIds,l=e.groups.findById(n);l.label=a,l.labels=i,l.infoFile=r,l.active=s,l.inlineLegendUrl=o,l.layers=c.map(function(t){return e.layers.find(function(e){return e.id===t})}),p(e)},receive_layers:function(e,t){var n=t.layersConf;e.layers=n.layers,e.contexts=n.contexts,e.groups=n.groups,p(e),e.activeContextsIds=e.contexts.reduce(function(e,t){return t.active?e.concat(t.id):e},[])},update_context:function(e,t){var n=t.contextId,a=t.property,r=t.value,s=e.contexts.find(function(e){return e.id===n});s&&(s[a]=r,i()(f.a).some(function(e){return e===a})&&s.layers.forEach(function(e){return e[a]=r}),e.contexts.splice(n,1,s))},toggle_context:function(e,t){var n=t.contextId;if(e.contexts.find(function(e){return e.id===n})){var a=e.activeContextsIds.indexOf(n);-1===a?e.activeContextsIds.push(n):e.activeContextsIds.splice(a,1)}},show_layer_info:function(e,t){var n=t.fileName,a=t.label,i=t.custom_content;e.layerInfo={fileName:n,label:a,custom_content:i}},set_context_time:function(e,t){var n=t.contextId,a=t.time;e.contextsTimes.splice(n,1,a)},overlay_kml:function(e,t){var n=t.kml;e.kmlOverlay=n},enable_feedback:function(e,t){var n=t.enable;e.enableFeedback=n},toggle_measure:function(e,t){t.enable;e.measureActive=!e.measureActive},update_group:function(e,t){var n=t.groupId,a=t.value,i=e.groups.findById(n);i&&(i.items=a),i.items.forEach(function(e){e.parent=i})},update_layers:function(e,t){var n=t.value;e.layers=n,e.contexts.forEach(function(e){var t=e.layers;e.layers=t.map(function(e){return n.find(function(t){return t.id===e.id})}).filter(function(e){return!!e})}),p(e)}},m={fetchLayersConfig:function(e){var t=e.commit;n.i(c.d)().then(function(e){return t("receive_layers",{layersConf:e})}).catch(function(e){return alert(e)})},restoreBackup:function(e,t){var a=e.dispatch,i=t.version;n.i(c.e)(i).then(function(){return a("fetchLayersConfig")}).catch(function(e){return alert("Server error:\n"+e.statusText)})}},g={activeContexts:function(e){return e.contexts.filter(function(t){return-1!==e.activeContextsIds.indexOf(t.id)})},activeLayers:function(e,t){var n=[];return t.activeContexts.forEach(function(e){return e.layers.forEach(function(e){return n.push(e)})}),n.filter(function(e,t,n){return n.indexOf(e)===t})},queryableLayers:function(e,t){return t.activeLayers.filter(function(e){return e.statistics})}};t.a=new o.c.Store({strict:!1,state:h,getters:g,actions:m,mutations:v})},291:function(e,t,n){"use strict";function a(){return"fa-"+(o++).toString(16)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(316),r=n.n(i),s={};t.default={name:"fa-icon",props:{name:{type:String,validator:function(e){return!e||e in s||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+e+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass:function(){return r()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(e,n,i){var r=a();return t[i]=r,' id="'+r+'"'}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(e,n,a,i){var r=n||i;return r&&t[r]?"#"+t[r]:e}),e}},mounted:function(){var e=this;if(!this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(!this.icon){var t=0,n=0;this.$children.forEach(function(a){a.outerScale=e.normalizedScale,t=Math.max(t,a.width),n=Math.max(n,a.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}},register:function(e){for(var t in e){var n=e[t];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),s[t]=n}},icons:s};var o=870711},292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),i=n.n(a),r=n(473),s=n.n(r),o=n(484),c=n.n(o),l=n(481),u=n.n(l),d=n(474),f=n.n(d),p=n(476),h=n.n(p),v=n(477),m=n.n(v),g=n(480),y=n.n(g),b=n(483),_=n.n(b),w=n(485),x=n.n(w),k=n(486),C=n.n(k),E=n(22),L=(n.n(E),n(69));t.default={name:"app",components:{Banner:s.a,MapPane:c.a,LayerSelector:u.a,ContextInfoModal:f.a,FeatureInfo:h.a,Feedback:m.a,KMLOverlay:y.a,Measure:x.a,Logos:_.a,Search:C.a},data:function(){return{user:L.a.user,showConsole:!1,llLogos:E.logos&&E.logos.ll||null,resizable:!0,adaptive:!0,draggable:!0}},created:function(){this.$store.dispatch("fetchLayersConfig"),this.user.authenticated&&this.loadEditor()},watch:{"user.authenticated":function(){this.user.authenticated?this.loadEditor():this.showConsole=!1}},mounted:function(){E.welcomePage&&this.showWelcomePage(!0,!0,!0)},methods:{loadEditor:function(){var e=this;n.e(0).then(function(t){i.a.component("EditorConsole",n(272)),e.showConsole=!0}.bind(null,n)).catch(n.oe)},showWelcomePage:function(e,t,n){var a=this;this.resizable=e,this.adaptive=t,this.draggable=n,this.$nextTick(function(){a.$modal.show({template:'\n            <div class="iframe-modal-content">\n              <div>Welcome</div>\n              <iframe v-bind:src="iframesrc" width=100% height=100%><b>Welcome to Gonini.org!</b></iframe>\n            </div>\n          ',props:["iframesrc"]},{iframesrc:E.welcomePage},{transition:"nice-modal-fade",draggable:n,adaptive:t,resizable:e,width:710,height:850})})}}}},293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(122),i=n.n(a),r=n(22),s=(n.n(r),n(47)),o=n.n(s),c=n(478),l=n.n(c),u=n(482),d=n.n(u),f=n(69),p=n(166),h=n(31);t.default={components:{FileDrop:l.a,LoginModal:d.a},data:function(){return{languages:r.languages,selectedLanguage:o.a.i18n.locale(),showUpload:!1,showLogin:!1,user:f.a.user,printURL:r.printApi&&r.printApi.url||null}},methods:{setLanguage:function(e){var t=this;o.a.i18n.load(e,"static/configuration/locale/"+e+".json").then(function(n){o.a.i18n.set(e),t.selectedLanguage=o.a.i18n.locale()}).catch(function(e){return alert("Error loading language file: "+e)})},enableFeedback:function(e){e.preventDefault(),this.$store.commit("enable_feedback",{enable:!0})},enableUpload:function(e){e.preventDefault(),this.showUpload=!0},disableUpload:function(){this.showUpload=!1},logout:function(){f.a.logout()},showLoginDialog:function(e){this.showLogin=e},toggleMeasure:function(e){e.preventDefault(),this.$store.commit("toggle_measure",{enable:!0})},printMap:function(e){e.preventDefault();var t=n.i(p.c)(this.activeLayers,this.activeContexts,o.a.i18n.locale()),a=r.printApi.url,s=new XMLHttpRequest;s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.responseType="blob",s.onload=function(){if(200===s.status){var e=s.getResponseHeader("content-disposition"),t=/"([^"]*)"/.exec(e),n=null!=t&&t[1]?t[1]:"map.pdf",a=new Blob([s.response],{type:"application/pdf"}),i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},s.send("spec="+encodeURIComponent(i()(t)))}},computed:n.i(h.b)(["activeLayers","activeContexts"])}},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(31),i=n(67),r=n(47),s=n.n(r),o=function(e){return e.replace("$(_lang)",s.a.i18n.locale())};t.default={data:function(){return{showModal:!1,custom_content:null,content:null}},methods:{closeByName:function(){this.$modal.hide("context-info-modal")}},watch:{layerInfo:function(e){var t=this;if(e.fileName||e.custom_content){this.label=e.label;var a=function(e){t.content=e,t.showModal=!0,t.$modal.show("context-info-modal")};e.custom_content?a(e.custom_content):n.i(i.a)("GET",o(e.fileName)).then(function(e){return a(e)}).catch(function(e){return a("Cannot get layer info:\n"+e.statusText)})}else this.showModal=!1}},computed:n.i(a.a)(["layerInfo"])}},295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),i=n.n(a);t.default={props:{conf:Object},data:function(){return{legendUrls:this.conf.legend(i.a.i18n.locale())}}}},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),i=n.n(a),r=n(79),s=n.n(r),o=n(176),c=n.n(o),l=n(42),u=n(54),d=n(142),f=n(214),p=n(31),h=n(55),v=n(67),m=n(47),g=n.n(m),y=new l.a({source:new u.a,map:h.a}),b=function(e,t){var n=/\$\((\w+)\)/g;return e.replace(n,function(e,n){var a=e.substring(2,e.length-1);return t.getProperties()[a]})},_=function(e,t){return b(e.replace("$(_lang)",g.a.i18n.locale()),t)},w=new f.a,x=function(e){return e.then(function(t){return{v:t,layer:e.layer,status:"fulfilled"}},function(t){return{e:t,layer:e.layer,status:"rejected"}})},k=void 0,C=void 0,E=void 0,L=function(e,t,n,a,i,r){var s=w.readFeatures(r.v,{featureProjection:"EPSG:3857"});return s.length&&(y.getSource().addFeatures(s),s.forEach(function(a){if(r.layer){r.layer.statistics.forEach(function(i){e.push(i);var r=i.labels.find(function(e){return e.language===g.a.i18n.locale()}).label;t.push(r?b(r,a):a.getId()),n.push(a)})}})),i+s.length},S=function(e){if(!this.enableFeedback&&!this.measureActive&&(E.setPosition(void 0),y.getSource().clear(),this.queryableLayers.length)){this.statisticsConfs=[],this.statisticsLabels=[],this.statisticsFeatures=[];var t=h.a.getSize(),a=c()(t,2),i=a[0],r=a[1],o=c()(e.pixel,2),l=o[0],u=o[1],d=h.a.getView().calculateExtent(t),f=[];this.queryableLayers.forEach(function(e){var t=(e.serverUrls&&e.serverUrls.length&&e.serverUrls[0])+"?LAYERS="+e.name+"&QUERY_LAYERS="+e.name+"&STYLES=&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&SRS=EPSG%3A900913&BBOX="+d.join("%2C")+"&FEATURE_COUNT=5&FORMAT=image%2Fpng&INFO_FORMAT=application%2Fjson&HEIGHT="+r+"&WIDTH="+i+"&X="+Math.round(l)+"&Y="+Math.round(u)+"&EXCEPTIONS=application%2Fvnd.ogc.se_xml",a=n.i(v.a)("GET",t);a.layer=e,f.push(a)}),s.a.all(f.map(x)).then(function(t){t.filter(function(e){return"fulfilled"===e.status}).reduce(L.bind(null,this.statisticsConfs,this.statisticsLabels,this.statisticsFeatures,e),0)>0?E.setPosition(e.coordinate):E.setPosition(void 0)}.bind(this))}};t.default={data:function(){return{statisticsLabels:[],statisticsConfs:[],statisticsFeatures:[],showStatisticsModal:!1,statisticsUrl:null,popupAttributes:null}},mounted:function(){k=document.getElementById("popup"),C=document.getElementById("popup-closer"),C.onclick=function(){return E.setPosition(void 0),C.blur(),y.getSource().clear(),!1},E=new d.a({element:k,autoPan:!0,autoPanAnimation:{duration:250}}),h.a.addOverlay(E)},watch:{layers:{immediate:!0,handler:function(){this.clickCallback||(this.clickCallback=S.bind(this)),h.a.un("singleclick",this.clickCallback),this.handlerKey=h.a.on("singleclick",this.clickCallback)}}},methods:{showStatistics:function(e,t){var n=function(e){var t=e.labels.find(function(e){return e.language===g.a.i18n.locale()});return t?t.label:null};switch(e.type){case"url":var a=e.url;this.statisticsUrl=_(a,t),this.$modal.show("stats-modal");break;case"attributes":var i=e.attributes;if(i)this.popupAttributes=i.map(function(e){return{label:n(e),value:t.getProperties()[e.attribute]||"n/a"}});else{var r=[],s=t.getProperties();for(var o in s)s.hasOwnProperty(o)&&"geometry"!==o&&r.push({label:o,value:s[o]});this.popupAttributes=r}this.$modal.show("props-modal")}}},computed:i()({},n.i(p.a)(["enableFeedback","measureActive","layers"]),n.i(p.b)(["queryableLayers"]))}},297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),i=n.n(a),r=n(250),s=n(232),o=n(148),c=n(144),l=n(31),u=n(55),d=n(22),f=(n.n(d),null),p=null;t.default={data:function(){return{drawSource:null,senderEmailIsRequired:d.feedbackApi.askForEmail||!1,senderEmail:"",message:"",draw:null,categories:d.feedbackApi.feedbackCategories||[],selectedCategory:"",drawOptions:d.feedbackApi.drawOptions||["Point","Polygon"],drawDefault:d.feedbackApi.drawDefault||"Polygon"}},watch:{enableFeedback:function(e){e?(this.drawSource=new r.a({wrapX:!1}),f=new s.a({source:this.drawSource,map:u.a}),this.drawOptions.includes(this.drawDefault||"Polygon")?this.draw=this.drawDefault||"Polygon":this.draw=this.drawOptions[0]):(this.message="",this.selectedCategory="",u.a.removeInteraction(p),this.clear(),u.a.removeLayer(f),this.draw=null)},draw:function(){this.draw&&(p&&u.a.removeInteraction(p),p=new o.a({source:this.drawSource,type:this.draw}),u.a.addInteraction(p))}},methods:{setDrawTool:function(e){this.draw=e},sendFeedback:function(){var e=f.getSource().getFeatures(),t=new c.a,n=t.writeFeatures(e,{featureProjection:"EPSG:3857"}),a=new XMLHttpRequest,i=this;a.onreadystatechange=function(){4===this.readyState&&(200===this.status?alert("Feedback sent"):alert("Error sending feedback\n"+this.responseText),i.disableFeedback())};var r="category="+this.selectedCategory+"&message="+this.message+"&kml="+n;d.feedbackApi.askForEmail&&(r+="&sender="+this.senderEmail),a.open("POST",d.feedbackApi.feedbackUrl,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r)},disableFeedback:function(){this.$store.commit("enable_feedback",{enable:!1})},clear:function(){f&&f.getSource().clear()},validEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},computed:i()({drew:function(){return!(!this.drawSource||!this.drawSource.getFeatures().length)},disableSend:function(){return!(!this.senderEmailIsRequired||this.validEmail(this.senderEmail))||!(this.drew&&""!==this.message&&(0===this.categories.length||""!==this.selectedCategory))}},n.i(l.a)(["enableFeedback"]))}},298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(165),i=n.n(a);t.default={components:{Modal:i.a},props:["show"],methods:{hideUploadPopup:function(){this.$emit("disable")}},watch:{show:function(e){var t=this,n=0,a=function(e){e.stopPropagation(),e.preventDefault(),n++,document.getElementById("dropTarget").classList.add("dragover")},i=function(e){0===--n&&document.getElementById("dropTarget").classList.remove("dragover")},r=function(e){e.stopPropagation(),e.preventDefault()},s=function(e){var n=e[0],a=new FileReader;a.onload=function(e){try{t.$store.commit("overlay_kml",{kml:e.target.result})}catch(e){alert("Error reading the KML file:\n"+e)}t.hideUploadPopup()},a.readAsText(n)},o=function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,a=t.files;s(a),n=0};e&&this.$nextTick(function(){var e=document.getElementById("dropTarget");e.addEventListener("dragenter",a,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("dragover",r,!1),e.addEventListener("drop",o,!1)})}}}},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(80),i=n.n(a),r=n(68),s=n.n(r),o=n(47),c=n.n(o),l=n(31),u=n(475),d=n.n(u),f=n(488),p=n.n(f),h=n(16),v=n.n(h),m=n(22),g=(n.n(m),n(288),n(286),n(271),n(285),n(283),n(269),n(289),n(281),n(282),n(284),n(287),n(290),n(270),n(280),n(279),n(278),function(e,t){var n=/\$\((\w+)\)/g;return e.replace(n,function(e,n){var a=e.substring(2,e.length-1);return t.getProperties()[a]})});t.default={name:"item",components:{ContextLegend:d.a,TimeSelect:p.a,Icon:v.a,draggable:function(e){return n.e(0).then(function(t){return e(n(267))}.bind(null,n)).catch(n.oe)}},props:{conf:Object},data:function(){return{open:!this.conf.parent,showLegend:!1,showTimeMenu:!1,highlighted:!1,opacity:this.conf.opacity}},computed:s()({list:{get:function(){return this.conf.items},set:function(e){this.$store.commit("update_group",{groupId:this.conf.id,value:e})}},label:function(){var e=this.conf.labels.find(function(e){return e.language===c.a.i18n.locale()});return e?e.label:null},isRoot:function(){return!this.conf.parent},hasLayers:function(){return!!this.conf.layers&&!!this.conf.layers.length},hasStatistics:function(){return!!this.conf.layers&&this.conf.layers.some(function(e){return e.statistics})},hasDataDownload:function(){return!!this.conf.layers&&this.conf.layers.some(function(e){return e.downloadLinks})},selectedTime:function(){return this.contextsTimes[this.conf.id]},active:function(){return-1!==this.activeContextsIds.indexOf(this.conf.id)},nContexts:function(){return function e(t){return t.isGroup?t.items.reduce(function(t,n){return t+e(n)},0):t.layers.length?1:0}(this.conf)},nActive:function(){var e=this.activeContextsIds;return function t(n){return n.isGroup?n.items.reduce(function(e,n){return e+t(n)},0):-1!==e.indexOf(n.id)?1:0}(this.conf)},locNActive:function(){var e=c.a.i18n.locale(),t=m.languages.find(function(t){return t.id===e});return t&&t.u&&(e+="-u-"+t.u),"object"===("undefined"==typeof Intl?"undefined":i()(Intl))&&"function"==typeof Intl.NumberFormat?this.nActive.toLocaleString(e):this.nActive}},n.i(l.a)(["contextsTimes","activeContextsIds","editing"])),watch:{active:function(){this.showLegend=!1}},methods:{startEditing:function(){this.$store.commit("enable_edit",{editing:!0})},editItem:function(){this.$store.commit("edit_item",{id:this.conf.id})},deleteItem:function(){confirm("Are you sure that you want to delete this item?")&&this.$store.commit("delete_item",{id:this.conf.id})},highlightContext:function(e){this.highlighted=e},toggleContent:function(){this.open=!this.open},toggleActive:function(){var e=this;this.conf.layers.length&&(this.conf.parent.exclusive?(!this.conf.parent.allowDisableAll&&this.active||this.$store.commit("toggle_context",{contextId:this.conf.id}),this.conf.parent.items.forEach(function(t){t.id!==e.conf.id&&-1!==e.activeContextsIds.indexOf(t.id)&&e.$store.commit("toggle_context",{contextId:t.id})})):this.$store.commit("toggle_context",{contextId:this.conf.id}))},updateOpacity:function(e){this.conf.layers.length&&this.$store.commit("update_context",{contextId:this.conf.id,property:"opacity",value:+e.target.value})},toggleLegend:function(){this.active&&(this.showLegend=!this.showLegend)},showInfo:function(){this.$store.commit("show_layer_info",{label:this.conf.label,fileName:this.conf.infoFile})},showDownloads:function(){var e='<div style="padding: 20px;"><div><b>'+this.label+" Downloads</b></div><br/><table>";!!this.conf.layers&&this.conf.layers.forEach(function(t){return t.downloadLinks.forEach(function(n,a){var i=n.labels.find(function(e){return e.language===c.a.i18n.locale()}).label;e+='<tr><td><a href="'+n.url+'" target=_blank>'+(i?g(i,t):(t.name||"Unnamed Layer")+" Download #"+(a+1))+"</a></td></tr>"})}),e+="</table></div>",this.$store.commit("show_layer_info",{label:"Downloads",custom_content:e})},toggleTimeMenu:function(){this.showTimeMenu=!this.showTimeMenu},setTime:function(e){this.$store.commit("set_context_time",{contextId:this.conf.id,time:e})}}}},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(42),i=n(54),r=n(46),s=n(94),o=n(118),c=n(161),l=n(144),u=n(31),d=n(55),f=void 0;t.default={methods:{clearFeedback:function(){this.$store.commit("overlay_kml",{kml:null})}},watch:{kmlOverlay:function(e){if(d.a.removeLayer(f),e){var t=new i.a({features:new l.a({extractStyles:!1}).readFeatures(e,{featureProjection:"EPSG:3857"})}),n=new o.a({color:"#319FD3",width:1}),u=new s.a({color:"rgba(255, 255, 255, 0.3)"}),p=new c.a({fill:u,stroke:n,radius:5}),h={Point:new r.d({image:p}),LineString:new r.d({stroke:n}),Polygon:new r.d({fill:u,stroke:n}),MultiPoint:new r.d({image:p}),MultiLineString:new r.d({stroke:n}),MultiPolygon:new r.d({fill:u,stroke:n})},v=function(e,t){var n=e.getStyleFunction();return n?n.call(e,t):h[e.getGeometry().getType()]};f=new a.a({source:t,style:v}),f.setZIndex(1e3),d.a.addLayer(f),d.a.getView().fit(t.getExtent(),d.a.getSize())}}},computed:n.i(u.a)(["kmlOverlay"])}},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(479),i=n.n(a),r=n(31),s=n(69);t.default={name:"layerSelector",components:{Item:i.a},data:function(){return{user:s.a.user}},computed:n.i(r.a)(["groups"])}},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(69),i=n(165),r=n.n(i);t.default={data:function(){return{user:null,password:null,error:null}},components:{Modal:r.a},props:["show"],methods:{submit:function(e,t){var n=this,i={username:this.user,password:this.password};a.a.login(i,"secretquote").then(function(e){n.$emit("disable"),n.user=n.password=n.error=null}).catch(function(e){this.error=e.statusText}.bind(this))},cancel:function(){this.$emit("disable"),this.user=this.password=this.error=null}}}},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{logosList:Array}}},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),i=n.n(a),r=n(173),s=n.n(r),o=n(276),c=n(47),l=n.n(c),u=n(31),d=n(55),f=n(109),p={};t.default={name:"mapPane",mounted:function(){d.a.setTarget("map")},watch:{layers:function(e){d.a.getLayers().clear(),e.forEach(function(e){try{var t=o.a.createOlLayer(e,l.a.i18n.locale());t&&(p[e.id]=t,d.a.addLayer(t))}catch(e){console.log(e)}})},locale:function(e,t){null!==t&&this.layers.forEach(function(n){if("wms"===n.type){var a=n.styles.find(function(e){return e.language===t}).label,i=n.styles.find(function(t){return t.language===e}).label;a!==i&&p[n.id].getSource().updateParams({STYLES:i})}})},activeLayers:function(e){this.layers.forEach(function(t){return p[t.id].setVisible(t.visible&&e.some(function(e){return e.id===t.id}))})},contextsTimes:function(e){var t=this;for(var n in e)!function(n){if(e[n]){t.contexts.find(function(e){return e.id===+n}).layers.forEach(function(t){return p[t.id].getSource().updateParams({TIME:e[n].iso8601})})}}(n)},contexts:function(e){this.contexts.forEach(function(e){s()(f.a).filter(function(t){return e.hasOwnProperty(t)}).forEach(function(t){e.layers.forEach(function(n){return p[n.id].set(t,e[t])})})})}},computed:i()({},n.i(u.a)({layers:function(e){return e.layers},contexts:function(e){return e.contexts},contextsTimes:function(e){return e.contextsTimes},locale:function(e){return e.i18n.locale}}),n.i(u.b)(["activeLayers"]))}},305:function(e,t,n){"use strict";function a(e){A=e.feature;var t=e.coordinate;j=A.getGeometry().on("change",function(e){var n=e.target,a=void 0;n instanceof y.b?(a=N(n),t=n.getInteriorPoint().getCoordinates()):n instanceof b.a&&(a=D(n),t=n.getLastCoordinate()),R.innerHTML=a,$.setPosition(t)})}function i(){R.className="tooltip tooltip-static",$.setOffset([0,-7]),A=null,R=null,o(),n.i(_.b)(j)}function r(){T=document.getElementById("measureToolType");var e="area"===T.value?"Polygon":"LineString";G=new x.a({source:P,type:e,style:new p.d({fill:new h.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new v.a({color:"rgba(255,69,0, 0.5)",lineDash:[10,10],width:2}),image:new m.a({radius:5,stroke:new v.a({color:"rgba(0, 0, 0, 0.7)"}),fill:new h.a({color:"rgba(255, 255, 255, 0.2)"})})})}),E.a.addInteraction(G),G.on("drawstart",a,this),G.on("drawend",i,this)}function s(){F&&F.parentNode.removeChild(F),F=document.createElement("div"),F.className="tooltip hidden",M=new g.a({element:F,offset:[15,0],positioning:"center-left"}),M.setMap(E.a)}function o(){R&&R.parentNode.removeChild(R),R=document.createElement("div"),R.className="tooltip tooltip-measure",$=new g.a({element:R,offset:[0,-15],positioning:"bottom-center"}),$.setMap(E.a),I.push($)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(68),l=n.n(c),u=n(36),d=n(250),f=n(232),p=n(46),h=n(94),v=n(118),m=n(161),g=n(142),y=n(39),b=n(87),_=n(141),w=n(159),x=n(148),k=n(144),C=n(31),E=n(55),L=null,S=null,T=void 0,I=new u.a,P=new d.a,O=new f.a({source:P,style:new p.d({fill:new h.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new v.a({color:"#ffcc33",width:2}),image:new m.a({radius:7,fill:new h.a({color:"#ffcc33"})})})}),A=void 0,F=void 0,M=void 0,R=void 0,$=void 0,U=function(e){if(!e.dragging){var t="Click to start drawing";if(A){var n=A.getGeometry();n instanceof y.b?t="Click to continue drawing the polygon":n instanceof b.a&&(t="Click to continue drawing the line")}M&&(F.innerHTML=t,M.setPosition(e.coordinate),F.classList.remove("hidden"))}},D=function(e){var t=n.i(w.c)(e);return t>100?Math.round(t/1e3*100)/100+" km":Math.round(100*t)/100+" m"},N=function(e){var t=n.i(w.d)(e);return t>1e4?Math.round(t/1e6*100)/100+" km<sup>2</sup>":Math.round(100*t)/100+" m<sup>2</sup>"},G=void 0,j=void 0;t.default={mounted:function(){this.$nextTick(function(){o(),s()})},watch:{measureActive:function(e){e?(r(),U&&O&&(O.setMap(E.a),M.setMap(E.a),$.setMap(E.a),E.a.on("pointermove",U),T&&T.classList.remove("hidden"),document.getElementById("measureOptions").classList.remove("hidden"),F&&F.classList.remove("hidden"))):(O.setMap(null),P.clear(),M.setMap(null),$.setMap(null),E.a.removeInteraction(G),E.a.un("pointermove",U),T&&T.classList.add("hidden"),document.getElementById("measureOptions").classList.add("hidden"),F&&F.classList.add("hidden"),G.un("drawstart",a),G.un("drawend",i),I.forEach(function(e){e.setMap(null)}))},draw:function(){this.draw&&(S&&E.a.removeInteraction(S),S=new x.a({source:this.drawSource,type:this.draw}),E.a.addInteraction(S))}},methods:{setDrawTool:function(e){this.draw=e},sendFeedback:function(){var e=L.getSource().getFeatures(),t=new k.a,n=t.writeFeatures(e,{featureProjection:"EPSG:3857"}),a=new XMLHttpRequest,i=this;a.onreadystatechange=function(){4===this.readyState&&(200===this.status?alert("Feedback sent"):alert("Error sending feedback\n"+this.responseText),i.disableFeedback())};var r="category="+this.selectedCategory+"&message="+this.message+"&kml="+n;a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r)},disableFeedback:function(){this.$store.commit("enable_feedback",{enable:!1})},clear:function(){L.getSource().clear()}},computed:l()({drew:function(){return!(!this.drawSource||!this.drawSource.getFeatures().length)},disableSend:function(){return!(this.drew&&""!==this.message&&""!==this.selectedCategory)},toolTypeSelected:{get:function(){return"length"},set:function(e){E.a.removeInteraction(G),G.un("drawstart",a),G.un("drawend",i),r()}}},n.i(C.a)(["measureActive"]))}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={created:function(){window.addEventListener("keydown",this.handleKeyDown)},methods:{handleKeyDown:function(e){13!==e.keyCode&&27!==e.keyCode||this.$emit("close")}}}},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(67),i=n(487),r=n.n(i),s=n(55),o=n(8),c=n(214),l=n(22);n.n(l);t.default={data:function(){return{searchText:"",results:[],wfsSearchConfig:l.wfsSearchConfig}},mounted:function(){this.$nextTick(function(){})},watch:{},methods:{clickHandler:function(e){e&&e.extent&&s.a.getView().fit(n.i(o.j)(e.extent,"EPSG:4326","EPSG:3857"),{size:s.a.getSize(),maxZoom:19})},goSearching:function(e){13===e.keyCode&&this.wfsSearch(this.searchText)},noop:function(){},wfsSearch:function(e){var t=this;if(!l.wfsSearchConfig||!l.wfsSearchConfig.layersToQuery)return void alert("WFS Search is not correctly configured.\nPlease contact your system administrator");if(l.wfsSearchConfig.layersToQuery.lenght!==l.wfsSearchConfig.attributesToFilter.lenght)return void alert("WFS Search attributes list lenght does not match the number of layers to query.\nPlease contact your system administrator");var i=l.wfsSearchConfig.layersToQuery.join(),r=encodeURI(l.wfsSearchConfig.attributesToFilter.join(" ILIKE '%"+e+"%';")+" ILIKE '%"+e+"%'"),s="outputFormat=application/json&maxfeatures=10&typeName="+i+"&cql_filter="+r,o=l.wfsSearchConfig.baseURL+"?service=WFS&version=1.1.0&request=GetFeature&"+s;n.i(a.a)("GET",o).then(function(n){var a=JSON.parse(n);if(a.features){t.results=[];var i=new c.a;a.features.forEach(function(t){if(t.geometry&&t.geometry.coordinates&&t.properties&&t.id){var n={};l.wfsSearchConfig.layersToQuery.forEach(function(a,i){var r=a.indexOf(":")>-1?a.split(":")[1]:a;t.id.indexOf(r)>-1&&(n.fromtable=a,n.title&&-1!==n.title.indexOf(e)||(n.title=t.properties[l.wfsSearchConfig.attributesToFilter[i]]))}),n.extent=i.readFeature(t).getGeometry().getExtent(),this.results.push(n)}},t)}}).catch(function(e){alert("Error WFS\n"+e)})}},components:{"search-results":r.a}}},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["result","clickHandler"]}},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{times:Array,selectedTime:Object},methods:{set:function(e){this.$emit("setTime",e)}}}},369:function(e,t){},370:function(e,t){},371:function(e,t){},372:function(e,t){},373:function(e,t){},374:function(e,t){},375:function(e,t){},376:function(e,t){},377:function(e,t){},378:function(e,t){},379:function(e,t){},380:function(e,t){},381:function(e,t){},382:function(e,t){},383:function(e,t){},384:function(e,t){},385:function(e,t){},386:function(e,t){},387:function(e,t){},388:function(e,t){},472:function(e,t,n){function a(e){n(374)}var i=n(12)(n(292),n(493),a,null,null);e.exports=i.exports},473:function(e,t,n){function a(e){n(385)}var i=n(12)(n(293),n(504),a,"data-v-cd5c3c7a",null);e.exports=i.exports},474:function(e,t,n){function a(e){n(388)}var i=n(12)(n(294),n(507),a,"data-v-dab0e0f2",null);e.exports=i.exports},475:function(e,t,n){var a=n(12)(n(295),n(499),null,null,null);e.exports=a.exports},476:function(e,t,n){function a(e){n(376),n(377)}var i=n(12)(n(296),n(495),a,"data-v-4ce15abd",null);e.exports=i.exports},477:function(e,t,n){function a(e){n(371)}var i=n(12)(n(297),n(490),a,"data-v-3c40f5dc",null);e.exports=i.exports},478:function(e,t,n){function a(e){n(372)}var i=n(12)(n(298),n(491),a,null,null);e.exports=i.exports},479:function(e,t,n){function a(e){n(381)}var i=n(12)(n(299),n(500),a,"data-v-7a81f42c",null);e.exports=i.exports},480:function(e,t,n){function a(e){n(378)}var i=n(12)(n(300),n(496),a,"data-v-4ec357bd",null);e.exports=i.exports},481:function(e,t,n){function a(e){n(373)}var i=n(12)(n(301),n(492),a,"data-v-457d77ee",null);e.exports=i.exports},482:function(e,t,n){function a(e){n(380)}var i=n(12)(n(302),n(498),a,"data-v-64bc13db",null);e.exports=i.exports},483:function(e,t,n){function a(e){n(383)}var i=n(12)(n(303),n(502),a,"data-v-892a263e",null);e.exports=i.exports},484:function(e,t,n){function a(e){n(370),n(369)}var i=n(12)(n(304),n(489),a,"data-v-1b5da95d",null);e.exports=i.exports},485:function(e,t,n){function a(e){n(386)}var i=n(12)(n(305),n(505),a,null,null);e.exports=i.exports},486:function(e,t,n){function a(e){n(384)}var i=n(12)(n(307),n(503),a,"data-v-a711ab82",null);e.exports=i.exports},487:function(e,t,n){function a(e){n(382)}var i=n(12)(n(308),n(501),a,"data-v-7e724288",null);e.exports=i.exports},488:function(e,t,n){function a(e){n(375)}var i=n(12)(n(309),n(494),a,"data-v-4a102a80",null);e.exports=i.exports},489:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"map"}})},staticRenderFns:[]}},490:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.enableFeedback?n("div",{attrs:{id:"feedback"}},[e.categories.length?n("div",{attrs:{id:"feedback-category"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedCategory=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.$t("feedback.selectCategory")))]),e._v(" "),e._l(e.categories,function(t){return n("option",{key:t.id},[e._v(e._s(t))])})],2)]):e._e(),e._v(" "),n("div",{attrs:{id:"tools"}},[e._v("\n    Draw:\n    "),e.drawOptions.includes("Point")?n("button",{staticClass:"small",class:{active:"Point"===e.draw},attrs:{type:"button"},on:{click:function(t){return e.setDrawTool("Point")}}},[e._v("Points")]):e._e(),e._v(" "),e.drawOptions.includes("Polygon")?n("button",{staticClass:"small",class:{active:"Polygon"===e.draw},attrs:{type:"button"},on:{click:function(t){return e.setDrawTool("Polygon")}}},[e._v("Polygons")]):e._e()]),e._v(" "),e.senderEmailIsRequired?n("div",{attrs:{id:"sender"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.senderEmail,expression:"senderEmail"}],attrs:{id:"message-sender",type:"email",name:"email",placeholder:"Write your email"},domProps:{value:e.senderEmail},on:{input:function(t){t.target.composing||(e.senderEmail=t.target.value)}}})]):e._e(),e._v(" "),n("div",{attrs:{id:"message"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{id:"message-text",rows:"6",placeholder:"Write your message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),e._v(" "),n("div",{attrs:{id:"buttons"}},[n("button",{staticClass:"small",attrs:{type:"button"},on:{click:e.disableFeedback}},[e._v("Cancel")]),e._v(" "),n("button",{staticClass:"small",attrs:{type:"button",disabled:!1===e.drew},on:{click:e.clear}},[e._v("Clear")]),e._v(" "),n("button",{staticClass:"small danger",attrs:{type:"button",disabled:e.disableSend},on:{click:e.sendFeedback}},[e._v("Send")])])]):e._e()},staticRenderFns:[]}},491:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("modal",{on:{close:function(t){return e.hideUploadPopup()}}},[n("div",{attrs:{slot:"body"},slot:"body"},[n("div",{attrs:{id:"dropTarget"}},[n("span",{attrs:{id:"dropText"},domProps:{innerHTML:e._s(e.$t("fileDrop.dropKml"))}})])])]):e._e()},staticRenderFns:[]}},492:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.groups?n("ul",{attrs:{id:"layer-selector"}},[n("item",{staticClass:"item",attrs:{conf:e.groups}})],1):e._e()},staticRenderFns:[]}},493:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("mapPane"),e._v(" "),n("div",{staticClass:"layers"},[n("layerSelector"),e._v(" "),e.showConsole?n("editor-console"):e._e()],1),e._v(" "),n("banner",{directives:[{name:"show",rawName:"v-show",value:this.$parent.loaded,expression:"this.$parent.loaded"}]}),e._v(" "),n("contextInfoModal"),e._v(" "),n("featureInfo"),e._v(" "),n("feedback"),e._v(" "),n("KMLOverlay"),e._v(" "),e.llLogos?n("Logos",{attrs:{id:"ll_logos",logosList:e.llLogos}}):e._e(),e._v(" "),n("measure"),e._v(" "),n("v-dialog"),e._v(" "),n("search")],1)},staticRenderFns:[]}},494:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown"},[n("ul",{staticClass:"dropdown-content"},e._l(e.times,function(t){return n("li",{key:t.id},[n("span",{class:{selected:t===e.selectedTime},on:{click:function(n){return e.set(t)}}},[e._v(e._s(t.humanReadable))]),e._v(" "),n("br")])}),0)])},staticRenderFns:[]}},495:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("modal",{attrs:{name:"stats-modal",draggable:!0,resizable:!0,minWidth:250,minHeight:220}},[n("div",{staticClass:"modal-container"},[n("h1",{staticClass:"modal-header"},[e._v(e._s(e.$t("featureInfo.info")))]),e._v(" "),n("iframe",{attrs:{width:"100%",height:"100%",src:e.statisticsUrl}})])]),e._v(" "),n("modal",{attrs:{name:"props-modal",draggable:!0,resizable:!0,minWidth:250,minHeight:220}},[n("div",{staticClass:"modal-container"},[n("h1",{staticClass:"modal-header"},[e._v(e._s(e.$t("featureInfo.attributes")))]),e._v(" "),n("div",{staticClass:"modal-body"},[n("table",e._l(e.popupAttributes,function(t){return n("tr",{key:t.id},[n("th",[e._v(e._s(t.label))]),e._v(" "),n("td",[e._v(e._s(t.value))])])}),0)])])]),e._v(" "),n("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[n("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}}),e._v(" "),n("ul",{attrs:{id:"popup-content"}},[n("p",{staticClass:"caption"},[e._v(e._s(e.$t("featureInfo.moreData")))]),e._v(" "),e._l(e.statisticsConfs,function(t,a){return n("li",{key:a,staticClass:"statsLink",on:{click:function(n){return e.showStatistics(t,e.statisticsFeatures[a])}}},[e._v(e._s(e.statisticsLabels[a]))])})],2)])],1)},staticRenderFns:[]}},496:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.kmlOverlay?n("div",{attrs:{id:"outer"}},[n("div",{attrs:{id:"message"}},[n("button",{staticClass:"small",attrs:{id:"clearButton"},on:{click:e.clearFeedback}},[e._v(e._s(e.$t("kmlOverlay.clear")))])])]):e._e()},staticRenderFns:[]}},497:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{class:e.klass,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t,a){return n("path",e._b({key:"path-"+a},"path",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t,a){return n("polygon",e._b({key:"polygon-"+a},"polygon",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.raw?[n("g",{domProps:{innerHTML:e._s(e.raw)}})]:e._e()])],2)},staticRenderFns:[]}},498:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("modal",[n("h1",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.error?"Error":"Login"))]),e._v(" "),n("div",{staticClass:"body",attrs:{slot:"body"},slot:"body"},[e.error?n("div",[n("p",[e._v(e._s(e.error))])]):n("table",[n("tr",[n("td",[e._v("User:")]),e._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],attrs:{type:"text",placeholder:"Enter your username"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}})])]),e._v(" "),n("tr",[n("td",[e._v("Pasword:")]),e._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Enter your password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])])])]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[e.error?n("a",{staticClass:"modal-default-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}},[e._v("\n      Ok\n    ")]):[n("a",{staticClass:"modal-default-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("\n        Login\n      ")]),e._v(" "),n("a",{staticClass:"modal-default-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}},[e._v("\n        Cancel\n      ")])]],2)]):e._e()},staticRenderFns:[]}},499:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.legendUrls,function(e,t){return n("div",{key:"legendUrl-"+t},[n("img",{attrs:{src:e}})])}),0)},staticRenderFns:[]}},500:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[e.conf.isGroup?n("div",{staticClass:"group",class:{dimmed:!e.nContexts},on:{click:e.toggleContent}},[n("span",{staticClass:"line icon"},[n("icon",{staticClass:"open-button",attrs:{name:e.open?"minus-square-o":"plus-square-o"}}),e._v(" "),n("span",{class:{handle:e.editing}},[e._v(e._s(e.isRoot?e.$t("layerSelector.layers"):e.label))])],1),e._v(" "),e.conf.infoFile?n("span",{staticClass:"info-link icon",on:{click:function(t){return t.stopPropagation(),e.showInfo(t)}}},[n("icon",{attrs:{name:"info-circle"}})],1):e._e(),e._v(" "),n("span",{staticClass:"counter"},[e._v(e._s(e.nActive?"‎["+e.locNActive+"‎]":null))]),e._v(" "),e.editing&&!e.isRoot?[n("span",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.editItem(t)}}},[n("icon",{staticClass:"icon edit",attrs:{name:"pencil-square-o"}})],1),e._v(" "),n("span",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.deleteItem(t)}}},[n("icon",{staticClass:"icon edit",attrs:{name:"trash-o"}})],1)]:e._e()],2):n("div",[e.hasLayers?n("span",{staticClass:"icon",on:{click:e.toggleContent}},[e.open?n("icon",{staticClass:"open-button",attrs:{name:"caret-down"}}):n("icon",{staticClass:"open-button",attrs:{name:"caret-right"}})],1):e._e(),e._v(" "),e.hasLayers?n("span",{staticClass:"icon",on:{click:e.toggleActive}},[e.conf.parent.exclusive?[e.active?n("icon",{staticClass:"activate-button",class:{highlighted:e.highlighted,active:e.active},attrs:{name:"dot-circle-o"}}):n("icon",{staticClass:"activate-button",class:{highlighted:e.highlighted,active:e.active},attrs:{name:"circle"}})]:[e.active?n("icon",{staticClass:"activate-button",class:{highlighted:e.highlighted,active:e.active},attrs:{name:"check-square"}}):n("icon",{staticClass:"activate-button",class:{highlighted:e.highlighted,active:e.active},attrs:{name:"square"}})]],2):e._e(),e._v(" "),e.conf.hasLegends?n("span",{staticClass:"icon",staticStyle:{"padding-left":"2px","padding-right":"2px"},on:{click:e.toggleLegend}},[n("icon",{staticClass:"legend-link",class:{active:e.active},attrs:{name:"th-list"}})],1):e._e(),e._v(" "),e.conf.inlineLegendUrl?n("img",{staticClass:"inline-legend",attrs:{src:e.conf.inlineLegendUrl}}):e._e(),e._v(" "),n("span",{class:{dimmed:!e.hasLayers,handle:e.editing},on:{mouseover:function(t){return e.highlightContext(!0)},mouseout:function(t){return e.highlightContext(!1)},click:e.toggleActive}},[e._v(e._s(e.label))]),e._v(" "),e.conf.infoFile?n("span",{staticClass:"info-link icon",on:{click:e.showInfo}},[n("icon",{attrs:{name:"info-circle"}})],1):e._e(),e._v(" "),this.conf.times&&this.conf.times.length?n("span",{staticClass:"times-button icon",class:{active:e.showTimeMenu},on:{click:e.toggleTimeMenu}},[n("icon",{attrs:{name:"clock-o"}}),e._v(" "+e._s(e.selectedTime.humanReadable)+"\n    ")],1):e._e(),e._v(" "),e.hasStatistics?n("span",{staticClass:"icon statistics",attrs:{title:e.$t("item.statisticsAvailable")}},[n("icon",{attrs:{name:"bar-chart"}})],1):e._e(),e._v(" "),e.hasDataDownload?n("span",{staticClass:"icon datadownload info-link",attrs:{title:e.$t("item.downloadAvailable")},on:{click:e.showDownloads}},[n("icon",{attrs:{name:"download"}})],1):e._e(),e._v(" "),e.showTimeMenu?n("time-select",{attrs:{times:e.conf.times,selectedTime:e.selectedTime},on:{setTime:e.setTime}}):e._e(),e._v(" "),e.editing?[n("span",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.editItem(t)}}},[n("icon",{staticClass:"icon edit",attrs:{name:"pencil-square-o"}})],1),e._v(" "),n("span",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.deleteItem(t)}}},[n("icon",{staticClass:"icon edit",attrs:{name:"trash-o"}})],1)]:e._e(),e._v(" "),e.open?n("div",{staticStyle:{"padding-left":"21px"}},[n("icon",{attrs:{name:"adjust"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.opacity,expression:"opacity"}],staticClass:"slider",attrs:{type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:e.opacity},on:{input:e.updateOpacity,__r:function(t){e.opacity=t.target.value}}})],1):e._e(),e._v(" "),e.conf.hasLegends&&e.active&&e.showLegend?[n("context-legend",{attrs:{conf:e.conf}})]:e._e()],2),e._v(" "),e.editing?[e.conf.isGroup?n("draggable",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticStyle:{"min-height":"10px"},attrs:{element:"ul",options:{group:"items",draggable:".item",animation:150,handle:".handle"}},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},e._l(e.list,function(e){return n("item",{key:e.id,staticClass:"item unselectable",attrs:{conf:e}})}),1):e._e()]:[e.conf.isGroup?n("ul",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticStyle:{"min-height":"10px"}},e._l(e.list,function(e){return n("item",{key:e.id,staticClass:"item unselectable",attrs:{conf:e}})}),1):e._e()]],2)},staticRenderFns:[]}},501:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"result"},[n("div",{staticClass:"box"},[n("article",{staticClass:"media"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content",on:{click:function(t){return e.clickHandler(e.result)}}},[n("p",[n("strong",[e._v(e._s(e.result.title))]),e._v(" "),n("br"),e._v("\n            "+e._s(e.result.fromtable)+"\n          ")])])])])])])},staticRenderFns:[]}},502:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",e._l(e.logosList,function(t){return n("li",{key:t.url},[t.link?n("a",{attrs:{href:t.link,target:"_blank"}},[t.imgUrl?n("img",{attrs:{src:t.imgUrl,width:t.size.width,height:t.size.height}}):e._e(),e._v(" "),t.text?n("span",[e._v(e._s(t.text))]):e._e()]):[t.imgUrl?n("img",{attrs:{src:t.imgUrl,width:t.size.width,height:t.size.height}}):e._e(),e._v(" "),t.text?n("span",[e._v(e._s(t.text))]):e._e()]],2)}),0)])},staticRenderFns:[]}},503:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.wfsSearchConfig&&e.wfsSearchConfig.layersToQuery?n("div",{attrs:{id:"search"}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.noop(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:e.searchText},on:{keyup:e.goSearching,input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),e._v(" "),n("br"),n("br")]),e._v(" "),e.results.length?n("div",{staticClass:"columns",attrs:{id:"search-results"}},[n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.results=[]}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),n("div",{staticClass:"column"},e._l(e.results,function(t){return n("search-results",e._b({key:t.id},"search-results",{result:t,clickHandler:e.clickHandler},!1))}),1)]):e._e()]):e._e()},staticRenderFns:[]}},504:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{danger:e.user.authenticated},attrs:{id:"header"}},[n("div",{attrs:{id:"title"}},[n("h1",{class:{hasSubtitle:e.$te("banner.subtitle")}},[e._v(e._s(e.$t("banner.title")))]),e._v(" "),e.$te("banner.subtitle")?n("h2",[e._v(e._s(e.$t("banner.subtitle")))]):e._e()]),e._v(" "),e.languages.length>1?n("ul",{staticClass:"buttons",attrs:{id:"languageLinks"}},e._l(e.languages,function(t){return n("li",{key:t.id},[t.id===e.selectedLanguage?n("span",{attrs:{href:"?lang="+t.id}},[e._v(e._s(t.label))]):n("a",{attrs:{href:"#"},on:{click:function(n){return e.setLanguage(t.id)}}},[e._v(e._s(t.label))])])}),0):e._e(),e._v(" "),n("ul",{staticClass:"buttons",attrs:{id:"tools"}},[e.user.authenticated?n("li",[n("a",{attrs:{id:"logout-button",href:"#"},on:{click:e.logout}},[e._v("Logout")])]):n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return e.showLoginDialog(!0)}}},[e._v("Admin")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.enableFeedback(t)}}},[e._v(e._s(e.$t("banner.feedback")))])]),e._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:e.enableUpload}},[e._v(e._s(e.$t("banner.uploadKml")))])]),e._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.toggleMeasure(t)}}},[e._v(e._s(e.$t("banner.measure")))])]),e._v(" "),e.printURL?n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.printMap(t)}}},[e._v("PDF")])]):e._e()]),e._v(" "),n("file-drop",{attrs:{show:e.showUpload},on:{disable:e.disableUpload}}),e._v(" "),n("login-modal",{attrs:{show:e.showLogin},on:{disable:function(t){return e.showLoginDialog(!1)}}})],1)},staticRenderFns:[]}},505:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hidden",attrs:{id:"measureOptions"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.toolTypeSelected,expression:"toolTypeSelected"}],staticClass:"hidden",attrs:{id:"measureToolType"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.toolTypeSelected=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"length"}},[e._v("Length (LineString)")]),e._v(" "),n("option",{attrs:{value:"area"}},[e._v("Area (Polygon)")])])])},staticRenderFns:[]}},506:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask",on:{mousedown:function(t){return e.$emit("close")}}},[n("div",{staticClass:"modal-container",on:{mousedown:function(e){e.stopPropagation()}}},[e.$slots.header?n("div",{staticClass:"modal-header"},[e._t("header")],2):e._e(),e._v(" "),n("div",{staticClass:"modal-body"},[e._t("body",[e._v("\n            default body\n          ")])],2),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"modal-footer"},[e._t("footer",[n("a",{staticClass:"modal-default-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("\n              Close\n            ")])])],2)])])])},staticRenderFns:[]}},507:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{name:"context-info-modal",draggable:!0,resizable:!0,minWidth:250,minHeight:220}},[n("div",{staticClass:"context-info-modal"},[n("button",{staticClass:"btn",on:{click:e.closeByName}},[e._v("X")]),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}})])])},staticRenderFns:[]}},509:function(e,t){e.exports={layout:"A4 portrait",srs:"EPSG:3857",units:"meters",geodetic:!0,outputFilename:"map",outputFormat:"pdf",layers:[{type:"WMS",layers:["unredd:provinces"],baseURL:"http://147.135.130.114/geoserver/wms?",format:"image/png"}],pages:[{mapTitle:"This is the title",center:[-8237642.319,4968191.93],scale:25e3,dpi:150,geodetic:!1,strictEpsg4326:!1}],legends:[{classes:[{icons:["http://www.rdc-snsf.org/portal/static/loc/en/images/ucl_2010.png"],name:""}],name:"a class name"}]}},510:function(e,t,n){n(263),e.exports=n(264)},55:function(e,t,n){"use strict";var a=n(195),i=n(204),r=n(207),s=n(395),o=n(28),c=n(8),l=n(22),u=(n.n(l),new r.a({coordinateFormat:n.i(o.a)(4),projection:"EPSG:4326",undefinedHTML:"&nbsp;"}));t.a=new a.a({controls:n.i(s.a)({attribution:!1,zoom:!0}).extend([u]).extend([new s.b({collapsible:!1})]),view:new i.a({center:n.i(c.a)(l.map.mapCenterLonLat||[0,0]),zoom:l.map.mapZoom||4})})},67:function(e,t,n){"use strict";var a=n(79),i=n.n(a);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return new i.a(function(i,r){var s=new XMLHttpRequest;s.open(e,t),a.forEach(function(e){s.setRequestHeader.apply(s,e)}),s.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300?i(this.responseText):r({status:this.status,statusText:this.responseText||"Error getting data from "+t}))},s.send(n)})}},69:function(e,t,n){"use strict";var a=n(79),i=n.n(a),r=n(122),s=n.n(r),o=n(67),c=n(22);n.n(c);t.a={user:{authenticated:!1},login:function(e,t){var a=this,r=c.layersConfigApi.baseUrl+c.layersConfigApi.loginUrl;return n.i(o.a)("POST",r,s()(e),[["Content-Type","application/json"]]).then(function(e){var t=JSON.parse(e);return localStorage.setItem("id_token",t.id_token),a.user.authenticated=!0,i.a.resolve(a.user)}).catch(function(e){return i.a.reject(e)})},logout:function(){localStorage.removeItem("id_token"),this.user.authenticated=!1},checkAuth:function(){var e=localStorage.getItem("id_token");this.user.authenticated=!!e},getAuthHeader:function(){return{Authorization:"Bearer "+localStorage.getItem("id_token")}},getAuthToken:function(){return"Bearer "+localStorage.getItem("id_token")}}}},[510]);
//# sourceMappingURL=app.06c5dd33a799af029ae8.js.map